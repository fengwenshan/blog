# Vue2.0

## 为什么引入虚拟DOM

Angular和React的变化侦测有一个共同点，就是它们不知道哪些状态发生改变，因此就需要进行暴力比对，React通过虚拟DOM比对，Angular是通过脏检查的流程。

Vue的变化侦测和它们不一样，它在一定程度上知道哪些状态发生改变，这样就可以通过细粒度更的绑定进行更新视图。也就是说Vue中，当状态发生变化时，它在一定程度上知道哪些节点使用了这个状态，从而对这些节点进行更新操作，根本就不需要比对。Vue1.0就是这样操作（mini-vue也是这个操作）。

这样做有一定的代价，就是粒度太细，每一个绑定都会有一个对应的watcher来观察状态变化，这样就会有一些内存开销以及一些依赖追踪的开销。当状态被越多的节点使用时，开销也就越大。对于大型项目来说，这个开销非常大。

因此，Vue2.x选择中等粒度的解决方案，就是引入虚拟dom。一个组件就是一个watcher实例，即便一个组件内有10个节点使用了某个状态，但其实也只有一个watcher在观察这个状态变化。所以当这个状态发生改变是，只能通知到组件，然后组件内部通过虚拟dom进行对比与渲染。

